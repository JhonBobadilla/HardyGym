<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Descubre Hardy Gym, tu gimnasio online para entrenamiento en casa. Accede a rutinas de ejercicio, clases en vivo y consejos de fitness desde cualquier lugar.">
    <meta name="keywords" content="gimnasio online, entrenamiento en casa, fitness virtual, clases de fitness, rutinas de ejercicio en línea, coach virtual, ejercicios en casa, vida saludable, salud">
    <meta name="author" content="Hardy Gym">
    <title>Restablecer</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="shortcut icon" href="../img/logo.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bowlby+One+SC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bowlby+One+SC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sixtyfour+Convergence&family=Stick+No+Bills:wght@200..800&display=swap" rel="stylesheet">

</head>
<body class="gimnasio">
   <header>
    <div class="cont_logo_hardy_list">
        <div class="principal_logo">
         <img class="logo1" src="../img/logo.png" alt="logo"></div>
        <div  class="principal_titulo">
        <h1 class="titulo">Restablecer</h1></div>
        <nav class="navbar navbar-expand-lg">
          <div class="container-fluid crecee">
            
            
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="menu listas">
                    <li class="nav-item">
                        <a class="style_a" href="../public/index.html"><li>Home</li></a>
                    </li>
                    
                </ul>    


            </div>
          </div>
          </nav>
        
     <div class="cont_texto_disciplinas">
       <p class="texto_disciplinas_en_resgister">
            
        
       </p>
     
     </div>

    </header>
    <div class="formularioo">
        <form id="newPasswordForm">
            <div class="input-group">
                <div class="input-container">
                    <input type="password" id="newPassword" name="newPassword" placeholder="Nueva contraseña" required>
                    <i class="fa-solid fa-lock"></i>
                </div>
                <input type="hidden" id="token" name="token"> <!-- Token oculto -->
                <input type="submit" class="btn" value="Restablecer Contraseña">
            </div>
        </form>
    </div>

    <footer>
        <div class="copi_red_gimnasio">
   
         <div class="copi">

            <p class="p_register">© 2024 HARDYGYM JABL TODOS LOS DERECHOS RESERVADOS. </p>
            <a href="https://www.instagram.com/hardygymcol/" target="_blank">
                <img class="red_social1" src="../img/instagram.png" alt="red_social1">
            </a> 
           
           
         </div>
        
       </footer>

    <script>
        document.getElementById('newPasswordForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const newPassword = document.getElementById('newPassword').value;
            const token = document.getElementById('token').value;

            fetch('/reset-password', { // Asegúrate de que esto coincide con la ruta en server.js
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ newPassword: newPassword, token: token })
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                // Recargar la página actual después de actualizar la contraseña
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al restablecer la contraseña');
            });
        });

        // Obtener el token de la URL y establecer el valor en el campo oculto
        const urlParams = new URLSearchParams(window.location.search);
        const tokenFromURL = urlParams.get('token');
        if (tokenFromURL) {
            document.getElementById('token').value = tokenFromURL;
        }
    </script>
    
</body>
</html>
